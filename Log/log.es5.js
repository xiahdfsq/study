"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),Reporter=function(){function e(t){_classCallCheck(this,e);var n='<div style="padding: 10px;background: #fff;position: absolute;width: 90%;top: 34%;z-index:999;"><div style="text-align: center;padding: 5px;line-height: 2em;border-bottom: 1px solid #ccc;position: relative;"><div>日志系统</div><div id="log_close" style="position: absolute;right: 10px;top: 5px;color: #999;">关闭</div></div><div style="padding: 5px;"><div style="display: flex;"><span>Inspect:</span><div style="flex: 1;padding: 0 10px;"><input id="log_server" type="text" style="width: 95%;" /></div><a id="log_inspect" style="width: 80px;text-align: center;background: #44f;border-radius: 3px;color: #fff;">Add</a></div></div></div>',o=t||{},i=document.createElement("div"),s=o.devMod||!0,l=(o.inspected||!0,this);i.style="display:none",i.innerHTML=n,document.body.appendChild(i),this.logNode=i,document.getElementById("log_close").addEventListener("click",function(){l.closePop()},!1),document.getElementById("log_inspect").addEventListener("click",function(){l.inspected?l.removeInspect():(l.server=document.getElementById("log_server").value,l.openInspect())},!1),s&&this.openDev()}return _createClass(e,[{key:"send",value:function(e){console.log(e.name),console.log(e.stack),console.log(e.message)}},{key:"listen",value:function(){console.log("启动监听"),this.stop=function(){}}},{key:"view",value:function(){console.log("查看日志"),this.logNode.style="display:block",this.inspected?document.getElementById("log_inspect").innerHTML="Remove":document.getElementById("log_inspect").innerHTML="Add"}},{key:"closePop",value:function(){console.log("关闭查看窗口"),this.logNode.style="display:none"}},{key:"openDev",value:function(){function e(e){n++,n>5&&t.view(),o||(o=window.setTimeout(function(){n=0,clearTimeout(o),o=null},1e3))}var t=this,n=0,o=void 0;document.body.addEventListener("click",e,!1),this.closeDev=function(){document.body.removeEventListener("click",e,!1)}}},{key:"openInspect",value:function(){var e=this;if(this.server){var t=document.createElement("script");t.src=this.server+"/target/target-script-min.js#anonymous",document.body.appendChild(t),this.closePop(),this.inspected=!0,this.removeInspect=function(){t.remove(),e.inspected=!1,document.getElementById("log_inspect").innerHTML="Add"}}}}]),e}();exports.default=Reporter;